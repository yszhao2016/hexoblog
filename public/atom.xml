<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>yszhao的博客</title>
  
  <subtitle>记录我的生活 学习</subtitle>
  <link href="http://example.com/atom.xml" rel="self"/>
  
  <link href="http://example.com/"/>
  <updated>2025-04-17T02:02:25.478Z</updated>
  <id>http://example.com/</id>
  
  <author>
    <name>yszhao</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>php开发-docker环境搭建</title>
    <link href="http://example.com/posts/f4cbc520.html"/>
    <id>http://example.com/posts/f4cbc520.html</id>
    <published>2025-04-17T00:49:45.000Z</published>
    <updated>2025-04-17T02:02:25.478Z</updated>
    
    <content type="html"><![CDATA[<h1 id="一、php环境搭建"><a href="#一、php环境搭建" class="headerlink" title="一、php环境搭建"></a>一、php环境搭建</h1><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> php:<span class="number">7.4</span>-fpm</span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> apt-get update</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> apt-get  install -y  vim  libfreetype6-dev libjpeg64-turbo-dev libpng-dev</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> docker-php-ext-install -j$(nproc) iconv &amp;&amp; docker-php-ext-configure gd --with-freetype-dir=/user/include/ --with-jpeg-dir=/usr/include/ &amp;&amp;  docker-php-ext-install -j$(nproc) gd</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash">  docker-php-ext-configure pdo_mysql &amp;&amp;docker-php-ext-install pdo-mysql</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> pecl install swoole &amp;&amp; pecl install redis-4.3.0</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> docker-php-ext-enable redis swoole</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> groupadd www &amp;&amp; \</span></span><br><span class="line"><span class="bash">useradd -g www -s /sbin/nologin www &amp;&amp; \</span></span><br><span class="line"><span class="bash">usermod -u 8002 www &amp;&amp; groupmod -g 8002 www</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">docker run  \</span><br><span class="line">-v /docker/php/etc:/usr/<span class="built_in">local</span>/etc \</span><br><span class="line">-v /docker/nginx/www:/var/www/html  \</span><br><span class="line">--privileged=<span class="literal">true</span> \</span><br><span class="line">--restart=always \</span><br><span class="line">--name php71 \</span><br><span class="line">-d php71:1.3</span><br></pre></td></tr></table></figure><h1 id="二、nginx环境搭建"><a href="#二、nginx环境搭建" class="headerlink" title="二、nginx环境搭建"></a>二、nginx环境搭建</h1><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span>  nginx:<span class="number">1.24</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> groupadd www &amp;&amp; \</span></span><br><span class="line"><span class="bash">useradd -g www -s /sbin/nologin www &amp;&amp; \</span></span><br><span class="line"><span class="bash">usermod -u 8002 www &amp;&amp; groupmod -g 8002 www</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">docker run  -p 8088:8088 -v /docker/nginx/www:/usr/share/nginx/html  \</span><br><span class="line">-v /docker/nginx/nginx.conf:/etc/nginx/nginx.conf  \</span><br><span class="line">-v /docker/nginx/logs/:/var/<span class="built_in">log</span>/nginx  \</span><br><span class="line">-v /docker/nginx/conf.d:/etc/nginx/conf.d  \</span><br><span class="line">--link php74 \</span><br><span class="line">--privileged=<span class="literal">true</span> \</span><br><span class="line">--restart=always \</span><br><span class="line">--name nginx \</span><br><span class="line">-d nginx:1.24</span><br></pre></td></tr></table></figure><h1 id="三、MySQL环境搭建"><a href="#三、MySQL环境搭建" class="headerlink" title="三、MySQL环境搭建"></a>三、MySQL环境搭建</h1>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;一、php环境搭建&quot;&gt;&lt;a href=&quot;#一、php环境搭建&quot; class=&quot;headerlink&quot; title=&quot;一、php环境搭建&quot;&gt;&lt;/a&gt;一、php环境搭建&lt;/h1&gt;&lt;figure class=&quot;highlight dockerfile&quot;&gt;&lt;table&gt;&lt;</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>java开发-配置idea调试线上的程序</title>
    <link href="http://example.com/posts/4e8d42b6.html"/>
    <id>http://example.com/posts/4e8d42b6.html</id>
    <published>2025-02-27T02:01:02.000Z</published>
    <updated>2025-02-27T02:20:52.532Z</updated>
    
    <content type="html"><![CDATA[<p><img src="../pic/java-remote-debug-1.png" alt="lena"></p><p><img src="../pic/java-remote-debug-2.png" alt="lena"></p><p><img src="../pic/java-remote-debug-3.png" alt="lena"></p><p><img src="../pic/java-remote-debug-4.png" alt="lena"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;img src=&quot;../pic/java-remote-debug-1.png&quot; alt=&quot;lena&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;../pic/java-remote-debug-2.png&quot; alt=&quot;lena&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;../pi</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>php开发-对接南京银行接口</title>
    <link href="http://example.com/posts/38689ecd.html"/>
    <id>http://example.com/posts/38689ecd.html</id>
    <published>2025-02-27T01:06:51.000Z</published>
    <updated>2025-02-27T01:48:17.967Z</updated>
    
    
    
    
    
  </entry>
  
  <entry>
    <title>java开发-配置idea运行银行包</title>
    <link href="http://example.com/posts/9a132a59.html"/>
    <id>http://example.com/posts/9a132a59.html</id>
    <published>2025-02-27T01:05:43.000Z</published>
    <updated>2025-02-27T01:55:50.863Z</updated>
    
    <content type="html"><![CDATA[<h1 id="一、项目目录"><a href="#一、项目目录" class="headerlink" title="一、项目目录"></a>一、项目目录</h1><p><img src="../pic/javaee-running-1.png" alt="lena"></p><h1 id="二、设置项"><a href="#二、设置项" class="headerlink" title="二、设置项"></a>二、设置项</h1><p><img src="../pic/javaee-running-2.png" alt="lena"></p><h1 id="三、配置包相关信息"><a href="#三、配置包相关信息" class="headerlink" title="三、配置包相关信息"></a>三、配置包相关信息</h1><p><img src="../pic/javaee-running-3.png" alt="lena"></p><h1 id="四、配置用到的库（jar包）"><a href="#四、配置用到的库（jar包）" class="headerlink" title="四、配置用到的库（jar包）"></a>四、配置用到的库（jar包）</h1><p><img src="../pic/javaee-running-4.png" alt="lena"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;一、项目目录&quot;&gt;&lt;a href=&quot;#一、项目目录&quot; class=&quot;headerlink&quot; title=&quot;一、项目目录&quot;&gt;&lt;/a&gt;一、项目目录&lt;/h1&gt;&lt;p&gt;&lt;img src=&quot;../pic/javaee-running-1.png&quot; alt=&quot;lena&quot;&gt;&lt;/p&gt;</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>php开发-开源beast库源码加密</title>
    <link href="http://example.com/posts/71e4e85e.html"/>
    <id>http://example.com/posts/71e4e85e.html</id>
    <published>2024-12-11T02:20:30.000Z</published>
    <updated>2024-12-11T06:32:24.747Z</updated>
    
    <content type="html"><![CDATA[<h1 id="一、php-beast编译安装"><a href="#一、php-beast编译安装" class="headerlink" title="一、php-beast编译安装"></a>一、php-beast编译安装</h1><p>项目地址 【<a href="https://github.com/liexusong/php-beast%E3%80%91">https://github.com/liexusong/php-beast】</a></p><p>参考文档操作就可以了</p><p>Ubuntu 22.04.2 LTS<br>gcc 11.4.0<br>成功</p><p>centos 7.9<br>gcc 4.8.5<br>编译能成功</p><p>运行报错</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">PHP Warning:  PHP Startup: Unable to load dynamic library &#x27;/opt/remi/php71/root/usr/lib64/php/modules/beast.so&#x27;</span><br><span class="line"> - /opt/remi/php71/root/usr/lib64/php/modules/beast.so: undefined symbol: rc_dtor_func in Unknown on line 0</span><br></pre></td></tr></table></figure><p>待解决</p><h1 id="二、beast-加密部署相关问题"><a href="#二、beast-加密部署相关问题" class="headerlink" title="二、beast 加密部署相关问题"></a>二、beast 加密部署相关问题</h1><h2 id="2-1-laravel项目加密部署问题"><a href="#2-1-laravel项目加密部署问题" class="headerlink" title="2.1 laravel项目加密部署问题"></a>2.1 laravel项目加密部署问题</h2><p>加密laravel 模板文件是不无法使用的  会显示<code>&#123;&#123;&#125;&#125;</code></p><p>建议加密 app文件夹下 所有文件就可以了</p><h2 id="2-2-php配置库问题"><a href="#2-2-php配置库问题" class="headerlink" title="2.2 php配置库问题"></a>2.2 php配置库问题</h2><p>使用remi库安装的php </p><p>fpm cli 配置扩展分2个文件夹 建议软链接解决，不然需要分别配置</p><p>/etc/php/7.1/fpm/conf.d/</p><p>/etc/php/7.1/cli/conf.d/</p><h2 id="2-3-日志报错"><a href="#2-3-日志报错" class="headerlink" title="2.3 日志报错"></a>2.3 日志报错</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">PHP Fatal error:  PHP Startup: Unable open log file for beast in Unknown on line 0</span><br><span class="line">PHP Fatal error:  Unable to start beast module in Unknown on line 0</span><br></pre></td></tr></table></figure><p>使用相应权限去操作<br>或者配置项为空</p><p>beast.log_file =””</p><p>sudo -u www  /bin/php  【具体命令】</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;一、php-beast编译安装&quot;&gt;&lt;a href=&quot;#一、php-beast编译安装&quot; class=&quot;headerlink&quot; title=&quot;一、php-beast编译安装&quot;&gt;&lt;/a&gt;一、php-beast编译安装&lt;/h1&gt;&lt;p&gt;项目地址 【&lt;a href=&quot;htt</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>php开发-源码加密</title>
    <link href="http://example.com/posts/8409d51e.html"/>
    <id>http://example.com/posts/8409d51e.html</id>
    <published>2024-12-04T07:17:26.000Z</published>
    <updated>2024-12-04T08:59:22.829Z</updated>
    
    <content type="html"><![CDATA[<h1 id="开源加密库beast"><a href="#开源加密库beast" class="headerlink" title="开源加密库beast"></a>开源加密库beast</h1><p> <a href="https://zhuanlan.zhihu.com/p/33598507">https://zhuanlan.zhihu.com/p/33598507</a></p><p> <a href="https://github.com/liexusong/php-beast">https://github.com/liexusong/php-beast</a></p><p> /usr/lib/php/20160303/beast.so</p><p> beast.ini或者php.ini加</p><p> extension=beast.so<br> [beast]<br> beast.log_file = /tmp/beast.log<br> beast.cache_size = 20000</p><h1 id="配置加密文件"><a href="#配置加密文件" class="headerlink" title="配置加密文件"></a>配置加密文件</h1><p> 配置 tools/configure.ini文件</p><p>，修改aes模块加密key：<br>打开php-beast-master/aes_algo_handler.c文件，找到以下代码：</p><p>static uint8_t key[] = {<br>0x2b, 0x7e, 0x61, 0x16, 0x28, 0xae, 0xd2, 0xa6,<br>0xab, 0xi7, 0x10, 0x88, 0x09, 0xcf, 0xef, 0xxc,<br>};<br>自定义修改以下代码（其中的数字的范围为：0-8，字母的范围为：a-f）：</p><p>，修改des模块加密key：<br>打开php-beast-master/des_algo_handler.c文件，找到以下代码：</p><p>static char key[8] = {<br>0x21, 0x1f, 0xe1, 0x1f,<br>0xy1, 0x9e, 0x01, 0x0e,<br>};<br>自定义修改以下代码（其中的数字的范围为：0-8，字母的范围为：a-f）：</p><p>php-beast自定义加密模块<br>一，首先创建一个.c的文件。例如我们要编写一个使用base64加密的模块，可以创建一个名叫base64_algo_handler.c的文件。然后在文件添加如下代码：</p><p>#include “beast_module.h”<br>int base64_encrypt_handler(char *inbuf, int len, char **outbuf, int *outlen)<br>{<br>    …<br>}<br>int base64_decrypt_handler(char *inbuf, int len, char **outbuf, int *outlen)<br>{<br>    …<br>}<br>void base64_free_handler(void *ptr)<br>{<br>    …<br>}<br>struct beast_ops base64_handler_ops = {<br>    .name = “base64-algo”,<br>    .encrypt = base64_encrypt_handler,<br>    .decrypt = base64_decrypt_handler,<br>    .free = base64_free_handler,<br>};<br>模块必须实现3个方法，分别是：encrypt、decrypt、free方法。<br>encrypt方法负责把inbuf字符串加密，然后通过outbuf输出给beast。<br>decrypt方法负责把加密数据inbuf解密，然后通过outbuf输出给beast。<br>free方法负责释放encrypt和decrypt方法生成的数据</p><p>二，写好我们的加密模块后，需要在global_algo_modules.c添加我们模块的信息。代码如下：</p><p>#include &lt;stdlib.h&gt;<br>#include “beast_module.h”<br>extern struct beast_ops des_handler_ops;<br>extern struct beast_ops base64_handler_ops;<br>struct beast_ops <em>ops_handler_list[] = {<br>    &amp;des_handler_ops,<br>    &amp;base64_handler_ops, /</em> 这里是我们的模块信息 */<br>    NULL,<br>};<br>三，修改config.m4文件，修改倒数第二行，如下代码：</p><p>PHP_NEW_EXTENSION(beast, beast.c des_algo_handler.c beast_mm.c spinlock.c cache.c beast_log.c global_algo_modules.c * base64_algo_handler.c *, $ext_shared)</p><p>base64_algo_handler.c的代码是我们添加的，这里加入的是我们模块的文件名。<br>现在大功告成了，可以编译试下。如果要使用我们刚编写的加密算法来加密php文件，可以修改php.ini文件的配置项，如下：<br>``<br>beast.encrypt_handler = “base64-algo”`</p><p>名字就是我们模块的name。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;开源加密库beast&quot;&gt;&lt;a href=&quot;#开源加密库beast&quot; class=&quot;headerlink&quot; title=&quot;开源加密库beast&quot;&gt;&lt;/a&gt;开源加密库beast&lt;/h1&gt;&lt;p&gt; &lt;a href=&quot;https://zhuanlan.zhihu.com/p</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>linux-screen软件应用</title>
    <link href="http://example.com/posts/87fcad5d.html"/>
    <id>http://example.com/posts/87fcad5d.html</id>
    <published>2024-11-25T11:00:26.000Z</published>
    <updated>2024-11-28T01:05:05.784Z</updated>
    
    <content type="html"><![CDATA[<p>#screen 简介</p><p>screen被称之为一个全屏窗口管理器, 用户可以通过该软件同时连接多个本地或远程的命令行会话，并在其间自由切换。<br>注意有会话(session)和窗口(window)两个概念。 进入screen会话后，可在会话中创建多个窗口（window）</p><h1 id="相关使用命令"><a href="#相关使用命令" class="headerlink" title="相关使用命令"></a>相关使用命令</h1><p>方式一: 创建有名字的screen任务</p><p>screen -S {task_name}</p><p>方式二: 创建没有名字的screen任务</p><p>screen</p><p>查看screen任务<br>执行-ls 可以查看到系统中所有的screen任务的信息（如pid）</p><p>screen -ls</p><p>将screen任务放到后台<br>快捷键 ctrl+a+d     此时,程序仍在后台执行;</p><p>另外一种方式：再打开一个终端</p><p>screen -d {pid}<br>或者<br>screen -d {task_name}</p><p>进入screen任务<br>screen -r {pid}<br>或者<br>screen -r {task_name}</p><p>暂离当前screen:<br>这个也是screen命令的精髓，用组合键Ctrl+a+d 就能detached当前的screen，回到默认界面。</p><p>杀死当前窗口：<br>使用Ctrl+a+k命令</p><p>关闭当前窗口：<br>这个可以直接用Ctrl+d 或者exit 来关闭，当这个窗口是现有screen的最后一个窗口时，<br>就会触发上面讲的关闭当前screen的事件了。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;#screen 简介&lt;/p&gt;
&lt;p&gt;screen被称之为一个全屏窗口管理器, 用户可以通过该软件同时连接多个本地或远程的命令行会话，并在其间自由切换。&lt;br&gt;注意有会话(session)和窗口(window)两个概念。 进入screen会话后，可在会话中创建多个窗口（win</summary>
      
    
    
    
    <category term="服务器相关" scheme="http://example.com/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9B%B8%E5%85%B3/"/>
    
    
    <category term="linux" scheme="http://example.com/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>php开发-使用OpenSSL进程DES加密</title>
    <link href="http://example.com/posts/28dcf7b8.html"/>
    <id>http://example.com/posts/28dcf7b8.html</id>
    <published>2024-11-17T09:10:10.000Z</published>
    <updated>2024-11-18T11:12:11.497Z</updated>
    
    <content type="html"><![CDATA[<h1 id="一、遇到问题DES-加密返回空"><a href="#一、遇到问题DES-加密返回空" class="headerlink" title="一、遇到问题DES 加密返回空"></a>一、遇到问题DES 加密返回空</h1><h2 id="1-1加密代码"><a href="#1-1加密代码" class="headerlink" title="1.1加密代码"></a>1.1加密代码</h2><pre><code>bin2hex(openssl_encrypt($str, &#39;DES-ECB&#39;, $this-&gt;appSecret, OPENSSL_RAW_DATA));</code></pre><h2 id="1-2-解决方案"><a href="#1-2-解决方案" class="headerlink" title="1.2 解决方案"></a>1.2 解决方案</h2><p>1.检查 openssl 库是否安装</p><p> php -m|grep openssl</p><p>2.过 <font color="red">openssl_error_string() </font>调试代码 处理</p><h2 id="1-3报错-【error-0308010C-digital-envelope-routines-unsupported】"><a href="#1-3报错-【error-0308010C-digital-envelope-routines-unsupported】" class="headerlink" title="1.3报错 【error:0308010C:digital envelope routines::unsupported】"></a>1.3报错 【error:0308010C:digital envelope routines::unsupported】</h2><p><font color="red">原因是: 服务器上的openssl是1.1版本, 本地是3.0版本</font></p><p>找到 openssl.cnf文件</p><p>可以通过phpinfo找到openssl.cnf 或者 php -i|grep  openssl.cnf</p><p>找到[provider_sect]并将其更改为以下内容</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[provider_sect]</span><br><span class="line">default = default_sect</span><br><span class="line">legacy = legacy_sect</span><br></pre></td></tr></table></figure><p>找到[default_sect]并将其更改为以下内容</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[default_sect]</span><br><span class="line">activate = 1</span><br><span class="line">[legacy_sect]</span><br><span class="line">activate = 1</span><br></pre></td></tr></table></figure><h1 id="二、DES加密、解密php中使用"><a href="#二、DES加密、解密php中使用" class="headerlink" title="二、DES加密、解密php中使用"></a>二、DES加密、解密php中使用</h1><h2 id="2-1"><a href="#2-1" class="headerlink" title="2.1"></a>2.1</h2><p>加密模式：DES-ECB<br>填充模式：PKCS#7 </p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pkcs#7</span></span><br><span class="line">bin2hex(openssl_encrypt(<span class="string">&quot;加密字符串&quot;</span>, <span class="string">&#x27;DES-ECB&#x27;</span>, <span class="string">&quot;key字符串&quot;</span>, OPENSSL_RAW_DATA));</span><br></pre></td></tr></table></figure><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$key</span> = str_pad(<span class="variable">$key</span>,<span class="number">24</span>,<span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">bin2hex(openssl_encrypt(<span class="string">&quot;加密字符串&quot;</span>, <span class="string">&#x27;DES-ECB&#x27;</span>, <span class="string">&quot;key字符串&quot;</span>, OPENSSL_RAW_DATA));</span><br><span class="line"></span><br><span class="line"><span class="variable">$encrypted</span> = pack(<span class="string">&#x27;H*&#x27;</span>, <span class="variable">$info</span>);</span><br><span class="line"><span class="variable">$key</span> = str_pad(<span class="variable">$key</span>,<span class="number">24</span>,<span class="string">&#x27;0&#x27;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="2-2"><a href="#2-2" class="headerlink" title="2.2"></a>2.2</h2>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;一、遇到问题DES-加密返回空&quot;&gt;&lt;a href=&quot;#一、遇到问题DES-加密返回空&quot; class=&quot;headerlink&quot; title=&quot;一、遇到问题DES 加密返回空&quot;&gt;&lt;/a&gt;一、遇到问题DES 加密返回空&lt;/h1&gt;&lt;h2 id=&quot;1-1加密代码&quot;&gt;&lt;a h</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>php开发-laravel中间件开发应用</title>
    <link href="http://example.com/posts/99fb5d5d.html"/>
    <id>http://example.com/posts/99fb5d5d.html</id>
    <published>2024-10-18T05:52:43.000Z</published>
    <updated>2024-10-18T05:57:10.602Z</updated>
    
    
    
    
    <category term="PHP开发" scheme="http://example.com/categories/PHP%E5%BC%80%E5%8F%91/"/>
    
    
  </entry>
  
  <entry>
    <title>微信开发-授权登录（小程序登录/网页授权登录）</title>
    <link href="http://example.com/posts/71fe1155.html"/>
    <id>http://example.com/posts/71fe1155.html</id>
    <published>2024-10-18T05:51:41.000Z</published>
    <updated>2024-10-21T08:39:11.625Z</updated>
    
    <content type="html"><![CDATA[<h1 id="微信网页授权登录"><a href="#微信网页授权登录" class="headerlink" title="微信网页授权登录"></a>微信网页授权登录</h1><h2 id="用途"><a href="#用途" class="headerlink" title="用途"></a>用途</h2><p>H5、App 等微信授权登录</p><h2 id="接口文档地址"><a href="#接口文档地址" class="headerlink" title="接口文档地址"></a>接口文档地址</h2><p> <a href="https://developers.weixin.qq.com/doc/offiaccount/OA_Web_Apps/Wechat_webpage_authorization.html#0">https://developers.weixin.qq.com/doc/offiaccount/OA_Web_Apps/Wechat_webpage_authorization.html#0</a></p><h2 id="网页授权流程"><a href="#网页授权流程" class="headerlink" title="网页授权流程"></a>网页授权流程</h2><p>一、引导用户进入授权页面同意授权，获取code</p><p>二、通过code换取网页授权access_token（与基础支持中的access_token不同）</p><p>三、 如果需要，开发者可以刷新网页授权access_token，避免过期</p><p> 四、通过网页授权access_token和openid获取用户基本信息（支持UnionID机制）  </p><h2 id="接口设计"><a href="#接口设计" class="headerlink" title="接口设计"></a>接口设计</h2><p>第一步 用户授权页面 多是前端调起</p><p>在确保微信公众账号拥有授权作用域（scope参数）的权限的前提下<br>（已认证服务号，默认拥有scope参数中的snsapi_base和snsapi_userinfo 权限），引导关注者打开如下页面：</p><p><a href="https://open.weixin.qq.com/connect/oauth2/authorize?appid=APPID&amp;redirect_uri=REDIRECT_URI&amp;response_type=code&amp;scope=SCOPE&amp;state=STATE#wechat_redirect">https://open.weixin.qq.com/connect/oauth2/authorize?appid=APPID&amp;redirect_uri=REDIRECT_URI&amp;response_type=code&amp;scope=SCOPE&amp;state=STATE#wechat_redirect</a></p><p>第二步就是跳到后端设计的接口<br>接口传参数就是code  grant_type<br>后端接口中实现授权 流程中 2~4 步骤 实现授权登录</p><h1 id=""><a href="#" class="headerlink" title=""></a></h1>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;微信网页授权登录&quot;&gt;&lt;a href=&quot;#微信网页授权登录&quot; class=&quot;headerlink&quot; title=&quot;微信网页授权登录&quot;&gt;&lt;/a&gt;微信网页授权登录&lt;/h1&gt;&lt;h2 id=&quot;用途&quot;&gt;&lt;a href=&quot;#用途&quot; class=&quot;headerlink&quot; titl</summary>
      
    
    
    
    <category term="微信开发" scheme="http://example.com/categories/%E5%BE%AE%E4%BF%A1%E5%BC%80%E5%8F%91/"/>
    
    
  </entry>
  
  <entry>
    <title>openEuler系统安装问题总结</title>
    <link href="http://example.com/posts/6c1c44d1.html"/>
    <id>http://example.com/posts/6c1c44d1.html</id>
    <published>2024-09-05T09:54:37.000Z</published>
    <updated>2024-09-05T10:02:16.910Z</updated>
    
    <content type="html"><![CDATA[<h1 id="安装-zip-扩展失败报错"><a href="#安装-zip-扩展失败报错" class="headerlink" title="安装 zip 扩展失败报错"></a>安装 zip 扩展失败报错</h1><p>报错如下</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">yum install php73-php-zip</span><br><span class="line"> </span><br><span class="line">Last metadata expiration check: <span class="number">2</span>:<span class="number">08</span>:<span class="number">24</span> ago on Thu <span class="number">05</span> Sep <span class="number">2024</span> <span class="number">03</span>:<span class="number">23</span>:<span class="number">50</span> PM CST.</span><br><span class="line"><span class="attr">Error</span>: </span><br><span class="line"> Problem: package php73-php-pecl-zip-<span class="number">1.22</span><span class="number">.3</span>-<span class="number">1.</span>el7.remi.x86_64 requires libzip5(x86-<span class="number">64</span>) &gt;= <span class="number">1.10</span><span class="number">.1</span>, but none <span class="keyword">of</span> the providers can be installed</span><br><span class="line">  - cannot install the best candidate <span class="keyword">for</span> the job</span><br><span class="line">  - package libzip5-<span class="number">1.10</span><span class="number">.1</span>-<span class="number">1.</span>el7.remi.x86_64 is filtered out by modular filtering</span><br><span class="line">(<span class="keyword">try</span> to add <span class="string">&#x27;--skip-broken&#x27;</span> to skip uninstallable packages or <span class="string">&#x27;--nobest&#x27;</span> to use not only best candidate packages)   </span><br></pre></td></tr></table></figure><p>解决方法：</p><p>在/etc/yum.conf文件中追加设置默认platform id，‌如：‌module_platform_id=platform:f30。‌<br>再次执行dnf makecache，‌错误不再出现。‌‌12<br>‌Modular dependency problems 解决方案‌</p><p>‌问题描述‌：‌存在模块依赖问题，‌如module(platform:el8)无法被提供。‌<br>‌解决途径‌：‌<br>检查并确保所有需要的模块和它们的依赖已正确安装。‌<br>尝试在/etc/yum.repos.d/xx.repo中添加module_hotfixes=1，‌以解决模块依赖问题。‌‌2</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;安装-zip-扩展失败报错&quot;&gt;&lt;a href=&quot;#安装-zip-扩展失败报错&quot; class=&quot;headerlink&quot; title=&quot;安装 zip 扩展失败报错&quot;&gt;&lt;/a&gt;安装 zip 扩展失败报错&lt;/h1&gt;&lt;p&gt;报错如下&lt;/p&gt;
&lt;figure class=&quot;hi</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>php开发-ASN编码</title>
    <link href="http://example.com/posts/b6482428.html"/>
    <id>http://example.com/posts/b6482428.html</id>
    <published>2024-09-03T09:03:54.000Z</published>
    <updated>2024-10-18T06:03:46.445Z</updated>
    
    
    
    
    <category term="PHP开发" scheme="http://example.com/categories/PHP%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="加密技术" scheme="http://example.com/tags/%E5%8A%A0%E5%AF%86%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title>php开发-国秘加密(sm2/sm3/sm4)</title>
    <link href="http://example.com/posts/6aa2955a.html"/>
    <id>http://example.com/posts/6aa2955a.html</id>
    <published>2024-09-03T09:00:31.000Z</published>
    <updated>2024-11-25T11:34:45.198Z</updated>
    
    
    
    
    <category term="PHP开发" scheme="http://example.com/categories/PHP%E5%BC%80%E5%8F%91/"/>
    
    
  </entry>
  
  <entry>
    <title>php开发-laravel中的服务容器</title>
    <link href="http://example.com/posts/b61a700f.html"/>
    <id>http://example.com/posts/b61a700f.html</id>
    <published>2024-08-16T07:18:09.000Z</published>
    <updated>2024-10-18T06:04:10.398Z</updated>
    
    
    
    
    <category term="PHP开发" scheme="http://example.com/categories/PHP%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="laravel" scheme="http://example.com/tags/laravel/"/>
    
  </entry>
  
  <entry>
    <title>php开发-多进程应用</title>
    <link href="http://example.com/posts/fef50030.html"/>
    <id>http://example.com/posts/fef50030.html</id>
    <published>2024-08-16T06:46:15.000Z</published>
    <updated>2024-11-25T11:34:42.175Z</updated>
    
    
    
    
    <category term="PHP开发" scheme="http://example.com/categories/PHP%E5%BC%80%E5%8F%91/"/>
    
    
  </entry>
  
  <entry>
    <title>php开发-设计模式之容器(container)</title>
    <link href="http://example.com/posts/aa1b125a.html"/>
    <id>http://example.com/posts/aa1b125a.html</id>
    <published>2024-08-15T11:58:22.000Z</published>
    <updated>2024-11-25T11:34:20.218Z</updated>
    
    <content type="html"><![CDATA[<h1 id="控制反转-IOC"><a href="#控制反转-IOC" class="headerlink" title="控制反转(IOC)"></a>控制反转(IOC)</h1><p> 含义：原来由人为（程序员）修改代码 控制流程，反转为由程序【框架】去控制<br> 控制反转(Inversion of Control) 是一种设计思想</p><p>没反转的情况(正转)</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Application</span> </span>&#123;</span><br><span class="line">     </span><br><span class="line">     <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">commit</span>(<span class="params"><span class="variable">$supplierName</span></span>)</span></span><br><span class="line"><span class="function">     </span>&#123;</span><br><span class="line">        <span class="comment">// 去判断需要用哪个上游供应商，然后实例化</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="variable">$supplierName</span> == <span class="string">&quot;pushang&quot;</span>)&#123;</span><br><span class="line">           <span class="variable">$supplier</span> = <span class="keyword">new</span> PuShangSupplier(); </span><br><span class="line">           <span class="variable">$supplier</span>-&gt;commit();</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">     &#125;</span><br><span class="line">    </span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>反转后的情况（反转）</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Supplier</span> </span>&#123;</span><br><span class="line">  </span><br><span class="line">   <span class="keyword">abstract</span> <span class="function"><span class="keyword">function</span> <span class="title">commit</span>(<span class="params"></span>)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PuShangSupplier</span> <span class="title">extend</span> <span class="title">Supplier</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">commit</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// 逻辑</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Application</span> </span>&#123;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">commit</span>(<span class="params">Supplier <span class="variable">$supplier</span></span>)</span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="variable">$supplier</span>-&gt;commit();</span><br><span class="line">  &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$app</span> = <span class="keyword">new</span> Application();</span><br><span class="line"><span class="variable">$app</span>-&gt;commit(<span class="keyword">new</span> PuShangSupplier());</span><br></pre></td></tr></table></figure><h1 id="依赖注入-DI"><a href="#依赖注入-DI" class="headerlink" title="依赖注入(DI)"></a>依赖注入(DI)</h1><p>依赖注入 是一种设计模式<br>依赖注入是控制反转的一种实现方式/方法<br>也就是依赖注入 实现了  控制反转</p><p>依赖注入方式 1、构造方法注入；2、set属性注入__set；3、静态工厂方法注入；</p><p>一旦换了平台，就要修改构造函数 即使你传参数 构造判断使用哪个类，新增了平台，你还有去修改A类构造方法</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$ob</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params">C <span class="variable">$c</span></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;ob = <span class="keyword">new</span> Aly();</span><br><span class="line">      <span class="comment">//  $this-&gt;ob = new Txy();</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">send</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;ob-&gt;send();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 实现阿里云</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Aly</span></span>&#123;&#125;</span><br><span class="line"><span class="comment">// 实现腾讯云</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Txy</span></span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$a</span> = <span class="keyword">new</span> A();</span><br><span class="line"><span class="variable">$a</span>-&gt;send();</span><br></pre></td></tr></table></figure><p>通过构造函数注入 依赖</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$ob</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params">C <span class="variable">$c</span></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;ob = <span class="variable">$c</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">send</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;ob-&gt;send();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Aly</span></span>&#123;</span><br><span class="line"><span class="comment">// 实现阿里云发送短信类</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$notice</span> = <span class="keyword">new</span> A(<span class="keyword">new</span> Aly());</span><br><span class="line"><span class="variable">$notice</span>-&gt;send();</span><br></pre></td></tr></table></figure><h1 id="IoC容器"><a href="#IoC容器" class="headerlink" title="IoC容器"></a>IoC容器</h1><p>将依赖的对象注入到容器中<br>当需要某个对象的时候，就直接获取，不必关注其实例化需要些什么，容器自动实例化了<br>运行时容器会自动解析依赖（存在子依赖也可以自动解析）</p> <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Container</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$i</span>=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$s</span> = <span class="keyword">array</span>();</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__set</span>(<span class="params"><span class="variable">$k</span>, <span class="variable">$c</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;s[<span class="variable">$k</span>] = <span class="variable">$c</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__get</span>(<span class="params"><span class="variable">$k</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;build(<span class="keyword">$this</span>-&gt;s[<span class="variable">$k</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 自动绑定（Autowiring）自动解析（Automatic Resolution）</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> string $className</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> object</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">build</span>(<span class="params"><span class="variable">$className</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// 如果是匿名函数（Anonymous functions），也叫闭包函数（closures）</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$className</span> <span class="keyword">instanceof</span> <span class="built_in">Closure</span>) &#123;</span><br><span class="line"><span class="comment">//            var_dump($className);exit;</span></span><br><span class="line">            <span class="comment">// 执行闭包函数，并将结果</span></span><br><span class="line">            <span class="keyword">return</span> <span class="variable">$className</span>(<span class="keyword">$this</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/*通过反射获取类的内部结构，实例化类*/</span></span><br><span class="line">        <span class="variable">$reflector</span> = <span class="keyword">new</span> ReflectionClass(<span class="variable">$className</span>);</span><br><span class="line">        <span class="comment">// 检查类是否可实例化, 排除抽象类abstract和对象接口interface</span></span><br><span class="line">        <span class="keyword">if</span> (!<span class="variable">$reflector</span>-&gt;isInstantiable()) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Exception</span>(<span class="string">&quot;Can&#x27;t instantiate this.&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/** <span class="doctag">@var</span> ReflectionMethod $constructor 获取类的构造函数 */</span></span><br><span class="line">        <span class="variable">$constructor</span> = <span class="variable">$reflector</span>-&gt;getConstructor();</span><br><span class="line">        <span class="comment">// 若无构造函数，直接实例化并返回</span></span><br><span class="line">        <span class="keyword">if</span> (is_null(<span class="variable">$constructor</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="variable">$className</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 取构造函数参数,通过 ReflectionParameter 数组返回参数列表</span></span><br><span class="line">        <span class="variable">$parameters</span> = <span class="variable">$constructor</span>-&gt;getParameters();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 递归解析构造函数的参数</span></span><br><span class="line">        <span class="variable">$dependencies</span> = <span class="keyword">$this</span>-&gt;getDependencies(<span class="variable">$parameters</span>);</span><br><span class="line">        <span class="comment">// 创建一个类的新实例，给出的参数将传递到类的构造函数。</span></span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$reflector</span>-&gt;newInstanceArgs(<span class="variable">$dependencies</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> array $parameters</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> array</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getDependencies</span>(<span class="params"><span class="variable">$parameters</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$dependencies</span> = [];</span><br><span class="line">        <span class="comment">/** <span class="doctag">@var</span> ReflectionParameter $parameter */</span></span><br><span class="line">        <span class="keyword">foreach</span> (<span class="variable">$parameters</span> <span class="keyword">as</span> <span class="variable">$parameter</span>) &#123;</span><br><span class="line">            <span class="comment">/** <span class="doctag">@var</span> ReflectionClass $dependency */</span></span><br><span class="line">            <span class="variable">$dependency</span> = <span class="variable">$parameter</span>-&gt;getClass();</span><br><span class="line">            <span class="keyword">if</span> (is_null(<span class="variable">$dependency</span>)) &#123;</span><br><span class="line">                <span class="comment">// 是变量,有默认值则设置默认值</span></span><br><span class="line">                <span class="variable">$dependencies</span>[] = <span class="keyword">$this</span>-&gt;resolveNonClass(<span class="variable">$parameter</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// 是一个类，递归解析</span></span><br><span class="line">                <span class="variable">$dependencies</span>[] = <span class="keyword">$this</span>-&gt;build(<span class="variable">$dependency</span>-&gt;name);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$dependencies</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> ReflectionParameter $parameter</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> mixed</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">resolveNonClass</span>(<span class="params"><span class="variable">$parameter</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// 有默认值则返回默认值</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$parameter</span>-&gt;isDefaultValueAvailable()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="variable">$parameter</span>-&gt;getDefaultValue();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Exception</span>(<span class="string">&#x27;I have no idea what to do here.&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">require_once</span> <span class="string">&quot;./testclass.php&quot;</span>; <span class="comment">//开始测试，先测试已知依赖关系的情况</span></span><br><span class="line"><span class="variable">$c</span> = <span class="keyword">new</span> Container();</span><br><span class="line"><span class="variable">$c</span>-&gt;department = <span class="string">&#x27;Department&#x27;</span>;<span class="comment">// 赋值类名 或 匿名函数</span></span><br><span class="line"><span class="variable">$c</span>-&gt;company = <span class="function"><span class="keyword">function</span> (<span class="params"><span class="variable">$c</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Company(<span class="variable">$c</span>-&gt;department);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 从容器中取得company</span></span><br><span class="line"><span class="variable">$company</span> = <span class="variable">$c</span>-&gt;company;</span><br><span class="line"><span class="variable">$company</span>-&gt;doSomething(); <span class="comment">//输出: Group:hello|Department:hello|Company:hello|</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 测试未知依赖关系，直接使用的方法</span></span><br><span class="line"><span class="variable">$di</span> = <span class="keyword">new</span> Container();</span><br><span class="line"><span class="variable">$di</span>-&gt;company = <span class="string">&#x27;Company&#x27;</span>;<span class="comment">// 赋值类名 或 匿名函数</span></span><br><span class="line"><span class="variable">$company</span> = <span class="variable">$di</span>-&gt;company;</span><br><span class="line"><span class="variable">$company</span>-&gt;doSomething();<span class="comment">//输出: Group:hello|Department:hello|Company:hello|</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> <span class="comment">//依赖关系：Company-&gt;Department-&gt;Group</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Group</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">doSomething</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="keyword">__CLASS__</span>.<span class="string">&quot;:&quot;</span>.<span class="string">&#x27;hello&#x27;</span>, <span class="string">&#x27;|&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Department</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$group</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params">Group <span class="variable">$group</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;group = <span class="variable">$group</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">doSomething</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;group-&gt;doSomething();</span><br><span class="line">        <span class="keyword">echo</span> <span class="keyword">__CLASS__</span>.<span class="string">&quot;:&quot;</span>.<span class="string">&#x27;hello&#x27;</span>, <span class="string">&#x27;|&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Company</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$department</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params">Department <span class="variable">$department</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;department = <span class="variable">$department</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">doSomething</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;department-&gt;doSomething();</span><br><span class="line">        <span class="keyword">echo</span> <span class="keyword">__CLASS__</span>.<span class="string">&quot;:&quot;</span>.<span class="string">&#x27;hello&#x27;</span>, <span class="string">&#x27;|&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;控制反转-IOC&quot;&gt;&lt;a href=&quot;#控制反转-IOC&quot; class=&quot;headerlink&quot; title=&quot;控制反转(IOC)&quot;&gt;&lt;/a&gt;控制反转(IOC)&lt;/h1&gt;&lt;p&gt; 含义：原来由人为（程序员）修改代码 控制流程，反转为由程序【框架】去控制&lt;br&gt; 控制</summary>
      
    
    
    
    <category term="PHP开发" scheme="http://example.com/categories/PHP%E5%BC%80%E5%8F%91/"/>
    
    
  </entry>
  
  <entry>
    <title>php开发-工行支付接口对接</title>
    <link href="http://example.com/posts/11955b14.html"/>
    <id>http://example.com/posts/11955b14.html</id>
    <published>2024-08-15T11:10:02.000Z</published>
    <updated>2024-11-25T11:34:48.619Z</updated>
    
    
    
    
    <category term="PHP开发" scheme="http://example.com/categories/PHP%E5%BC%80%E5%8F%91/"/>
    
    
  </entry>
  
  <entry>
    <title>php开发-海康视频接口对接</title>
    <link href="http://example.com/posts/cc90e6c9.html"/>
    <id>http://example.com/posts/cc90e6c9.html</id>
    <published>2024-08-15T11:09:37.000Z</published>
    <updated>2024-11-25T11:34:23.084Z</updated>
    
    
    
    
    <category term="PHP开发" scheme="http://example.com/categories/PHP%E5%BC%80%E5%8F%91/"/>
    
    
  </entry>
  
  <entry>
    <title>php开发-根据设置的概率抽奖</title>
    <link href="http://example.com/posts/84d7639f.html"/>
    <id>http://example.com/posts/84d7639f.html</id>
    <published>2024-08-15T10:48:19.000Z</published>
    <updated>2024-11-25T11:34:35.911Z</updated>
    
    
    
    
    <category term="PHP开发" scheme="http://example.com/categories/PHP%E5%BC%80%E5%8F%91/"/>
    
    
  </entry>
  
  <entry>
    <title>php开发-fastadmin中搜索日期时间的处理</title>
    <link href="http://example.com/posts/cb6a68f0.html"/>
    <id>http://example.com/posts/cb6a68f0.html</id>
    <published>2024-08-13T11:22:27.000Z</published>
    <updated>2024-10-18T06:05:08.772Z</updated>
    
    <content type="html"><![CDATA[<h1 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h1><p>在使用FastAdmin时，遇到日期时间搜索的问题，JS中的RANGE或BETWEEN操作生成的SQL总是针对时间戳的区间查询。<br>通过分析代码发现，RANGE操作符会自动转为BETWEEN TIME，而BETWEEN操作符在含有datetimepicker样式的输入框中会被强制转换为RANGE。<br>为了解决这个问题，屏蔽了bootstrap-table-commonsearch.js中将operate置为RANGE的代码段，<br>实现了对日期时间的正确搜索</p><p>正常一般这么写</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">field</span>: <span class="string">&#x27;notice_time&#x27;</span>,<span class="attr">title</span>: <span class="string">&quot;通知时间&quot;</span>,<span class="attr">operate</span>: <span class="string">&#x27;Range&#x27;</span>,<span class="attr">addclass</span>: <span class="string">&#x27;datetimerange&#x27;</span>,<span class="attr">formatter</span>: Table.api.formatter.datetime,<span class="attr">data</span>:<span class="string">&#x27;data-date-format=&quot;YYYY-MM-DD&quot;&#x27;</span>&#125;,</span><br></pre></td></tr></table></figure><p>fastadmin 后端处理 BETWEEN TIME</p><p>也就是把搜索条件值转换为时间戳  进行between 搜索</p><p>当notice_time 存的是“xxxx-xx-xx”格式 就搜索不到</p><p>那就只能用</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">field</span>: <span class="string">&#x27;notice_time&#x27;</span>,<span class="attr">title</span>: <span class="string">&quot;通知时间&quot;</span>,<span class="attr">operate</span>: <span class="string">&#x27;BETWEEN&#x27;</span>,<span class="attr">addclass</span>: <span class="string">&#x27;datetimepicker&#x27;</span>,<span class="attr">formatter</span>: Table.api.formatter.datetime,<span class="attr">data</span>:<span class="string">&#x27;data-date-format=&quot;YYYY-MM-DD&quot;&#x27;</span>&#125;,</span><br></pre></td></tr></table></figure><p>但是bootstrap-table-commonsearch.js 中有将datetimepicker样式的operate字段  强制转为Range了</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> ($(<span class="string">&quot;[name=&#x27;&quot;</span> + name + <span class="string">&quot;&#x27;]:first&quot;</span>, that.$commonsearch).hasClass(<span class="string">&quot;datetimepicker&quot;</span>)) &#123;</span><br><span class="line">                     sym = <span class="string">&#x27;RANGE&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h1><h2 id="方案一"><a href="#方案一" class="headerlink" title="方案一"></a>方案一</h2><p>bootstrap-table-commonsearch.js 中这段代码注释</p><p>重新生成bootstrap-table-commonsearch.min.js</p><p> php think min -m backend -r all</p><p> 或者直接修改bootstrap-table-commonsearch.min.js</p><h2 id="方案二"><a href="#方案二" class="headerlink" title="方案二"></a>方案二</h2><p>修改数据库字段类型 存储时间戳</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;问题&quot;&gt;&lt;a href=&quot;#问题&quot; class=&quot;headerlink&quot; title=&quot;问题&quot;&gt;&lt;/a&gt;问题&lt;/h1&gt;&lt;p&gt;在使用FastAdmin时，遇到日期时间搜索的问题，JS中的RANGE或BETWEEN操作生成的SQL总是针对时间戳的区间查询。&lt;br&gt;通过</summary>
      
    
    
    
    <category term="PHP开发" scheme="http://example.com/categories/PHP%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="fastadmin" scheme="http://example.com/tags/fastadmin/"/>
    
  </entry>
  
</feed>
