---
title: 云主机硬盘扩容
abbrlink: 18f37986
categories:
  - 服务器相关
date: 2024-01-03 12:52:02
tags:
---

# 1.查看分区容量是否增加

    lsblk
    
# 2. 扩容MBR分区和ext4文件系统
 
## 第一步
    #redhat类系统
    type growpart || sudo yum install -y cloud-utils-growpart
    
    #debian类系统
    type growpart || sudo apt-get install -y cloud-guest-utils
## 第二步 扩展分区   
    sudo LC_ALL=en_US.UTF-8 growpart /dev/vdb 1

## 第三步   扩展文件系统

    sudo resize2fs /dev/vdb1
    
# 3. 扩容GPT分区和xfs文件系统
    
## 第一步
    sudo apt-get update
    type growpart || sudo apt-get install -y cloud-guest-utils
    
    type sgdisk || sudo yum install -y gdisk
## 第二步  扩展分区 
    # 扩容分区
    sudo LC_ALL=en_US.UTF-8 growpart /dev/vdb 2
## 第三步   展文件系统    
    #扩容文件系统
    type xfs_growfs || sudo yum install -y xfsprogs
    sudo xfs_growfs /mnt
    
# 裸数据盘

    无分区结构
        未划分逻辑分区（如 /dev/vdb1、/dev/vdb2），直接以设备名 /dev/vdb 作为操作对象。
    无文件系统
        未创建文件系统（如 ext4、XFS），需手动格式化才能存储文件。
    直接访问物理扇区
        应用程序可直接读写原始二进制数据，绕过文件系统层，适用于高性能数据库或分布式存储场景

## 裸数据盘创建

    使用 mkfs 命令创建文件系统（无需分区）：
    sudo mkfs -t ext4 /dev/vdb  # ext4格式
    # 或使用XFS
    sudo mkfs -t xfs -f /dev/vdb  # -f强制覆盖现有文件系统

## 扩容裸数据盘
    sudo resize2fs /dev/vdb